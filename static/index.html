<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ECA Command Center</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/static/styles.css?v=20260228f" />
  <link rel="icon" type="image/svg+xml" href="/static/favicon.svg" />
</head>
<body>

<div class="app-shell">

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logo">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="34" viewBox="0 0 72 76">
          <defs>
            <linearGradient id="sb-sg" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#3b82f6"/><stop offset="100%" stop-color="#1d4ed8"/>
            </linearGradient>
            <linearGradient id="sb-pg" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#60a5fa"/><stop offset="100%" stop-color="#93c5fd"/>
            </linearGradient>
          </defs>
          <path d="M8 12 L36 4 L64 12 L64 40 Q64 60 36 72 Q8 60 8 40 Z" fill="url(#sb-sg)"/>
          <polyline points="24 28 40 40 24 52" fill="none" stroke="#fff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
          <line x1="42" y1="52" x2="52" y2="52" stroke="url(#sb-pg)" stroke-width="3.5" stroke-linecap="round"/>
        </svg>
      </div>
      <div>
        <div class="sidebar-title-main">ECA</div>
        <div class="sidebar-title-sub">Command Center</div>
      </div>
    </div>

    <nav class="sidebar-nav">
      <button class="nav-item active" data-page="dashboard">
        <span class="nav-dot"></span> Dashboard
      </button>
      <button class="nav-item" data-page="jobs">
        <span class="nav-dot"></span> Jobs <span class="nav-badge" id="nav-badge-jobs"></span>
      </button>
      <button class="nav-item" data-page="admin" id="nav-admin" style="display:none;">
        <span class="nav-dot" style="background:#f59e0b;"></span> Admin
      </button>
    </nav>

    <div class="sidebar-system-info" id="sidebar-system-info">
      <div class="sidebar-clock" id="sidebar-clock">--:--</div>
      <div class="sidebar-date" id="sidebar-date"></div>
    </div>

    <div class="sidebar-footer">
      <div class="sidebar-footer-row">
        <span id="health-dot" class="health-dot" title="Checking..."></span>
        <span>Backend</span>
      </div>
      <div class="sidebar-footer-row" style="margin-top:6px;">
        <button class="theme-toggle-btn" onclick="toggleSoundAlert()" title="Toggle sound alerts on failure">
          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
          <span id="sound-alert-label">Sound: Off</span>
        </button>
      </div>
      <div class="sidebar-footer-row" style="margin-top:4px;">
        <button class="theme-toggle-btn" id="theme-toggle" onclick="toggleTheme()" title="Toggle light/dark mode">
          <svg id="theme-icon-sun" class="theme-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
          <svg id="theme-icon-moon" class="theme-icon" style="display:none;" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          <span id="theme-label">Light Mode</span>
        </button>
      </div>
    </div>
  </aside>

  <!-- Main -->
  <main class="main">

    <header class="hero-banner">
      <!-- Inline SVG data center illustration -->
      <div class="hero-scene">
        <svg class="hero-svg" viewBox="0 0 800 180" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
          <defs>
            <linearGradient id="hg1" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#1e3a5f" stop-opacity="0.6"/>
              <stop offset="100%" stop-color="#0f172a" stop-opacity="0.8"/>
            </linearGradient>
            <linearGradient id="hg-rack" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#334155"/><stop offset="100%" stop-color="#1e293b"/>
            </linearGradient>
            <linearGradient id="hg-glow" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#3b82f6" stop-opacity="0"/><stop offset="50%" stop-color="#3b82f6" stop-opacity="0.3"/><stop offset="100%" stop-color="#3b82f6" stop-opacity="0"/>
            </linearGradient>
            <filter id="hf-glow"><feGaussianBlur stdDeviation="2" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          </defs>

          <!-- Floor grid lines -->
          <line class="floor-line" x1="0" y1="160" x2="800" y2="160" stroke="#334155" stroke-width="1" opacity="0.4"/>
          <line class="floor-line" x1="0" y1="170" x2="800" y2="170" stroke="#334155" stroke-width="0.5" opacity="0.2"/>

          <!-- LEFT rack cluster -->
          <g class="rack-group" opacity="0.35">
            <rect class="rack-panel" x="30" y="40" width="50" height="120" rx="3" fill="url(#hg-rack)" stroke="#475569" stroke-width="0.5"/>
            <rect class="rack-slot" x="35" y="48" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="69" cy="52" r="2" fill="#4ade80" opacity="0.8"><animate attributeName="opacity" values="0.8;0.3;0.8" dur="2s" repeatCount="indefinite"/></circle>
            <rect class="rack-slot" x="35" y="60" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="69" cy="64" r="2" fill="#60a5fa" opacity="0.7"/>
            <rect class="rack-slot" x="35" y="72" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="69" cy="76" r="2" fill="#4ade80" opacity="0.6"><animate attributeName="opacity" values="0.6;0.2;0.6" dur="3s" repeatCount="indefinite"/></circle>
            <rect class="rack-slot" x="35" y="84" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="69" cy="88" r="2" fill="#60a5fa" opacity="0.5"/>
            <rect class="rack-slot" x="35" y="96" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="69" cy="100" r="2" fill="#4ade80" opacity="0.7"/>
            <rect class="rack-slot" x="35" y="108" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="69" cy="112" r="2" fill="#fbbf24" opacity="0.6"><animate attributeName="opacity" values="0.6;0.9;0.6" dur="1.5s" repeatCount="indefinite"/></circle>
            <rect class="rack-panel" x="90" y="40" width="50" height="120" rx="3" fill="url(#hg-rack)" stroke="#475569" stroke-width="0.5"/>
            <rect class="rack-slot" x="95" y="48" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="129" cy="52" r="2" fill="#4ade80" opacity="0.7"><animate attributeName="opacity" values="0.7;0.3;0.7" dur="2.5s" repeatCount="indefinite"/></circle>
            <rect class="rack-slot" x="95" y="60" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="129" cy="64" r="2" fill="#4ade80" opacity="0.8"/>
            <rect class="rack-slot" x="95" y="72" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="129" cy="76" r="2" fill="#60a5fa" opacity="0.6"/>
            <rect class="rack-slot" x="95" y="84" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="129" cy="88" r="2" fill="#4ade80" opacity="0.5"><animate attributeName="opacity" values="0.5;0.2;0.5" dur="2s" repeatCount="indefinite"/></circle>
            <rect class="rack-slot" x="95" y="96" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="129" cy="100" r="2" fill="#60a5fa" opacity="0.7"/>
            <rect class="rack-slot" x="95" y="108" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="129" cy="112" r="2" fill="#4ade80" opacity="0.6"/>
            <path class="cable-line" d="M80 155 Q80 165 90 165 L100 165" stroke="#3b82f6" stroke-width="0.8" fill="none" opacity="0.3"/>
          </g>

          <!-- RIGHT rack cluster -->
          <g class="rack-group" opacity="0.35">
            <rect class="rack-panel" x="660" y="40" width="50" height="120" rx="3" fill="url(#hg-rack)" stroke="#475569" stroke-width="0.5"/>
            <rect class="rack-slot" x="665" y="48" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="699" cy="52" r="2" fill="#4ade80" opacity="0.7"><animate attributeName="opacity" values="0.7;0.3;0.7" dur="2.2s" repeatCount="indefinite"/></circle>
            <rect class="rack-slot" x="665" y="60" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="699" cy="64" r="2" fill="#60a5fa" opacity="0.6"/>
            <rect class="rack-slot" x="665" y="72" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="699" cy="76" r="2" fill="#4ade80" opacity="0.8"/>
            <rect class="rack-slot" x="665" y="84" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="699" cy="88" r="2" fill="#fbbf24" opacity="0.5"><animate attributeName="opacity" values="0.5;0.8;0.5" dur="1.8s" repeatCount="indefinite"/></circle>
            <rect class="rack-slot" x="665" y="96" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="699" cy="100" r="2" fill="#4ade80" opacity="0.6"/>
            <rect class="rack-slot" x="665" y="108" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="699" cy="112" r="2" fill="#60a5fa" opacity="0.7"><animate attributeName="opacity" values="0.7;0.4;0.7" dur="2.8s" repeatCount="indefinite"/></circle>

            <rect class="rack-panel" x="720" y="40" width="50" height="120" rx="3" fill="url(#hg-rack)" stroke="#475569" stroke-width="0.5"/>
            <rect class="rack-slot" x="725" y="48" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="759" cy="52" r="2" fill="#60a5fa" opacity="0.6"/>
            <rect class="rack-slot" x="725" y="60" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="759" cy="64" r="2" fill="#4ade80" opacity="0.7"><animate attributeName="opacity" values="0.7;0.2;0.7" dur="2s" repeatCount="indefinite"/></circle>
            <rect class="rack-slot" x="725" y="72" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="759" cy="76" r="2" fill="#4ade80" opacity="0.5"/>
            <rect class="rack-slot" x="725" y="84" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="759" cy="88" r="2" fill="#60a5fa" opacity="0.8"/>
            <rect class="rack-slot" x="725" y="96" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="759" cy="100" r="2" fill="#4ade80" opacity="0.6"><animate attributeName="opacity" values="0.6;0.3;0.6" dur="2.4s" repeatCount="indefinite"/></circle>
            <rect class="rack-slot" x="725" y="108" width="40" height="8" rx="1" fill="#0f172a"/><circle cx="759" cy="112" r="2" fill="#fbbf24" opacity="0.5"/>
            <path class="cable-line" d="M710 155 Q710 165 720 165 L730 165" stroke="#3b82f6" stroke-width="0.8" fill="none" opacity="0.3"/>
          </g>

          <!-- Center network switch -->
          <g class="switch-group" opacity="0.25">
            <rect class="switch-body" x="340" y="145" width="120" height="16" rx="2" fill="#1e293b" stroke="#475569" stroke-width="0.5"/>
            <circle cx="355" cy="153" r="1.5" fill="#4ade80" opacity="0.8"/><circle cx="365" cy="153" r="1.5" fill="#4ade80" opacity="0.6"/>
            <circle cx="375" cy="153" r="1.5" fill="#60a5fa" opacity="0.7"/><circle cx="385" cy="153" r="1.5" fill="#4ade80" opacity="0.5"/>
            <circle cx="395" cy="153" r="1.5" fill="#60a5fa" opacity="0.8"/><circle cx="405" cy="153" r="1.5" fill="#4ade80" opacity="0.6"/>
            <circle cx="415" cy="153" r="1.5" fill="#4ade80" opacity="0.7"/><circle cx="425" cy="153" r="1.5" fill="#60a5fa" opacity="0.5"/>
            <circle cx="435" cy="153" r="1.5" fill="#4ade80" opacity="0.8"/><circle cx="445" cy="153" r="1.5" fill="#fbbf24" opacity="0.6"/>
            <path class="cable-line" d="M345 153 Q250 153 140 130" stroke="#3b82f6" stroke-width="0.5" fill="none" opacity="0.2"/>
            <path class="cable-line" d="M455 153 Q550 153 660 130" stroke="#3b82f6" stroke-width="0.5" fill="none" opacity="0.2"/>
          </g>

          <!-- Horizontal scan line -->
          <rect class="scan-line" x="0" y="0" width="800" height="2" fill="url(#hg-glow)" opacity="0.4">
            <animate attributeName="y" values="0;180;0" dur="8s" repeatCount="indefinite"/>
          </rect>
        </svg>
      </div>

      <!-- Centered text overlay -->
      <div class="hero-content">
        <div class="hero-logo-row">
          <svg width="38" height="40" viewBox="0 0 72 76" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="hl-sg" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#3b82f6"/><stop offset="100%" stop-color="#1d4ed8"/>
              </linearGradient>
              <linearGradient id="hl-pg" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#60a5fa"/><stop offset="100%" stop-color="#93c5fd"/>
              </linearGradient>
            </defs>
            <path d="M8 12 L36 4 L64 12 L64 40 Q64 60 36 72 Q8 60 8 40 Z" fill="url(#hl-sg)"/>
            <polyline points="24 28 40 40 24 52" fill="none" stroke="#fff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            <line x1="42" y1="52" x2="52" y2="52" stroke="url(#hl-pg)" stroke-width="3.5" stroke-linecap="round"/>
          </svg>
          <h1 class="hero-title">ECA Command Center</h1>
        </div>
        <p class="hero-subtitle">Servers (Dell, HP) &bull; Switches (Cisco, Avocent) &bull; PDU (Gelu, Raritan)</p>
        <p class="hero-subtitle-line2">Firmware Update &bull; Complex Configuration &bull; Diagnostics &bull; Full Reporting</p>
        <div class="hero-actions">
          <span class="muted shortcut-hint" title="Press ? for all shortcuts"><kbd>N</kbd> New Job &nbsp; <kbd>J</kbd> Jobs &nbsp; <kbd>?</kbd> Help</span>
          <button class="btn-primary" onclick="launchWizard()">New Job <kbd>N</kbd></button>
        </div>
      </div>
    </header>

    <div class="page-container">

      <!-- Dashboard -->
      <section class="page-view active" data-page-view="dashboard">

        <!-- Ops Banner -->
        <div class="ops-banner" id="ops-banner"></div>

        <!-- KPI Summary Cards -->
        <div class="kpi-grid" id="kpi-grid"></div>

        <!-- Recent Jobs -->
        <div class="card" style="margin-top:16px;">
          <div class="card-header">
            <div>
              <div class="card-title">Recent Jobs</div>
              <div class="card-subtitle">Latest job activity across all workflows</div>
            </div>
            <button class="btn ghost" onclick="document.querySelector('[data-page=jobs]').click()">View All</button>
          </div>
          <div class="card-body">
            <div id="saved-jobs-list">Loading...</div>
          </div>
        </div>

      </section>

      <!-- Jobs -->
      <section class="page-view" data-page-view="jobs">
        <div class="card full-width">
          <div class="card-header">
            <div>
              <div class="card-title">Saved Jobs</div>
              <div class="card-subtitle">Stored on disk and managed by the backend.</div>
            </div>
            <div style="display:flex;gap:8px;align-items:center;">
              <button class="btn ghost" onclick="exportJobsCSV()" title="Export filtered jobs to CSV">Export CSV</button>
              <button class="btn ghost" onclick="loadJobs()" title="Refresh job list">Refresh</button>
              <button class="btn-secondary" onclick="launchWizard()">New Job <kbd>N</kbd></button>
            </div>
          </div>
          <div class="card-body">
            <div id="jobs-table" class="jobs-table">Loading jobs...</div>
          </div>
        </div>
      </section>

      <!-- Admin -->
      <section class="page-view" data-page-view="admin">
        <!-- KPI Summary Row -->
        <div class="kpi-grid" id="admin-kpi-row">
          <div class="kpi-card kpi-card-blue" tabindex="0">
            <div class="kpi-icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#60a5fa" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></div>
            <div class="kpi-label">Users</div>
            <div class="kpi-value" id="admin-kpi-users">--</div>
          </div>
          <div class="kpi-card kpi-card-green" tabindex="0">
            <div class="kpi-icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#4ade80" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg></div>
            <div class="kpi-label">Customers</div>
            <div class="kpi-value" id="admin-kpi-customers">--</div>
          </div>
          <div class="kpi-card kpi-card-default" tabindex="0">
            <div class="kpi-icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg></div>
            <div class="kpi-label">Workflows</div>
            <div class="kpi-value" id="admin-kpi-workflows">--</div>
          </div>
          <div class="kpi-card kpi-card-amber" tabindex="0">
            <div class="kpi-icon"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg></div>
            <div class="kpi-label">Audit Entries</div>
            <div class="kpi-value" id="admin-kpi-audit">--</div>
          </div>
        </div>

        <!-- Main Admin Card -->
        <div class="card full-width" style="margin-top:16px;">
          <div class="card-header">
            <div>
              <div class="card-title">Administration</div>
              <div class="card-subtitle">Manage users, customers, workflows, and view audit logs.</div>
            </div>
            <div class="admin-user-indicator" id="admin-user-indicator"></div>
          </div>
          <div class="card-body" style="padding:0;">
            <div class="admin-tabs">
              <button class="admin-tab active" data-admin-tab="users" onclick="switchAdminTab('users')">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                Users <span class="nav-badge" id="admin-badge-users"></span>
              </button>
              <button class="admin-tab" data-admin-tab="customers" onclick="switchAdminTab('customers')">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
                Customers <span class="nav-badge" id="admin-badge-customers"></span>
              </button>
              <button class="admin-tab" data-admin-tab="workflows" onclick="switchAdminTab('workflows')">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                Workflows <span class="nav-badge" id="admin-badge-workflows"></span>
              </button>
              <button class="admin-tab" data-admin-tab="audit" onclick="switchAdminTab('audit')">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg>
                Audit Log <span class="admin-live-badge" id="admin-audit-live" style="display:none;"></span>
              </button>
            </div>
            <div class="admin-panel active" id="admin-panel-users"></div>
            <div class="admin-panel" id="admin-panel-customers"></div>
            <div class="admin-panel" id="admin-panel-workflows"></div>
            <div class="admin-panel" id="admin-panel-audit"></div>
          </div>
        </div>
      </section>

    </div>
  </main>
</div>

<!-- Login overlay (shown when not authenticated) -->
<div id="login-overlay" class="login-overlay" style="display:none;">
  <div class="login-card">
    <div class="login-logo">
      <svg width="48" height="50" viewBox="0 0 72 76" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="lg-sg" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#3b82f6"/><stop offset="100%" stop-color="#1d4ed8"/>
          </linearGradient>
          <linearGradient id="lg-pg" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#60a5fa"/><stop offset="100%" stop-color="#93c5fd"/>
          </linearGradient>
        </defs>
        <path d="M8 12 L36 4 L64 12 L64 40 Q64 60 36 72 Q8 60 8 40 Z" fill="url(#lg-sg)"/>
        <polyline points="24 28 40 40 24 52" fill="none" stroke="#fff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
        <line x1="42" y1="52" x2="52" y2="52" stroke="url(#lg-pg)" stroke-width="3.5" stroke-linecap="round"/>
      </svg>
    </div>
    <h2 class="login-title">ECA Command Center</h2>
    <p class="login-subtitle">Sign in to continue</p>
    <form id="login-form" onsubmit="return false;">
      <div class="login-field">
        <label for="login-username">Username</label>
        <input type="text" id="login-username" class="inp" placeholder="admin" autocomplete="username" autofocus />
      </div>
      <div class="login-field">
        <label for="login-password">Password</label>
        <input type="password" id="login-password" class="inp" placeholder="Password" autocomplete="current-password" />
      </div>
      <div id="login-error" class="login-error" style="display:none;"></div>
      <button type="submit" class="btn primary login-btn" id="login-submit">Sign In</button>
    </form>
  </div>
</div>

<!-- Password change overlay (shown when mustChangePassword is true) -->
<div id="pw-change-overlay" class="login-overlay" style="display:none;">
  <div class="login-card">
    <div class="login-logo">
      <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/>
      </svg>
    </div>
    <h2 class="login-title">Change Your Password</h2>
    <p class="login-subtitle">You must set a new password before continuing.</p>
    <form id="pw-change-form" onsubmit="return false;">
      <div class="login-field">
        <label for="pw-current">Current Password</label>
        <input type="password" id="pw-current" class="inp" placeholder="Current password" autocomplete="current-password" />
      </div>
      <div class="login-field">
        <label for="pw-new">New Password</label>
        <input type="password" id="pw-new" class="inp" placeholder="New password" autocomplete="new-password" />
      </div>
      <div class="login-field">
        <label for="pw-confirm">Confirm New Password</label>
        <input type="password" id="pw-confirm" class="inp" placeholder="Confirm new password" autocomplete="new-password" />
      </div>
      <div id="pw-change-error" class="login-error" style="display:none;"></div>
      <button type="submit" class="btn primary login-btn" id="pw-change-submit">Update Password</button>
    </form>
  </div>
</div>

<!-- Wizard modal container -->
<div id="wizard-container"></div>

<!-- Confirm modal container -->
<div id="confirm-modal-container"></div>

<!-- Toast container -->
<div id="toast-container" class="toast-container" aria-live="polite" role="status"></div>

<!-- Scripts (defer preserves execution order while unblocking HTML parsing) -->
<script defer src="/static/utils.js?v=20260228d"></script>
<script defer src="/static/api.js?v=20260228d"></script>
<script defer src="/static/theme.js?v=20260228d"></script>
<script defer src="/static/ui-config.js?v=20260228d"></script>
<script defer src="/static/workflow-logic.js?v=20260228d"></script>
<script defer src="/static/dashboard.js?v=20260228f"></script>
<script defer src="/static/wizard-modal.js?v=20260228d"></script>
<script defer src="/static/job-panel-customer.js?v=20260228d"></script>
<script defer src="/static/job-panel-files.js?v=20260228e"></script>
<script defer src="/static/job-panel-inventory.js?v=20260228d"></script>
<script defer src="/static/job-panel-tasks.js?v=20260228d"></script>
<script defer src="/static/job-panel-groups.js?v=20260228d"></script>
<script defer src="/static/job-panel-execution.js?v=20260228d"></script>
<script defer src="/static/job-panel-status.js?v=20260228d"></script>
<script defer src="/static/job-panel-history.js?v=20260228d"></script>
<script defer src="/static/job-panel-tsr.js?v=20260228d"></script>
<script defer src="/static/job-panel-core.js?v=20260228d"></script>
<script defer src="/static/admin.js?v=20260228d"></script>
<script defer src="/static/wizard.js?v=20260228d"></script>

</body>
</html>
